{% extends "base.html" %} 
{% block content %}

<style>
    @import url('https://fonts.googleapis.com/css2?family=Julius+Sans+One&display=swap');

    body {
        min-height: 100vh;
        margin: 0;
        background:
            linear-gradient(rgba(6,20,24,0.9), rgba(6,20,24,0.9)),
            url("https://images.unsplash.com/photo-1523961131990-5ea7c61b2107?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTV8fGNyeXB0b2N1cnJlbmN5fGVufDB8fDB8fHww");
        background-size: cover;
        background-position: center;
        font-family: 'Julius Sans One', sans-serif;
        color: #f0fdfa;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
        overflow: hidden;
    }

    /* Ambient logos */
    .ambient-logos {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 0;
    }

    .ambient-logos img {
        position: absolute;
        filter: invert(1);
        opacity: 0.15;
        animation: float 10s ease-in-out infinite;
    }

    /* Individual logo placement & size */
    .a1  { top: 5%;  left: 8%;   width: 40px; animation-delay: 0s; }
    .a2  { top: 12%; right: 10%; width: 64px; animation-delay: 1s; }
    .a3  { top: 22%; left: 20%;  width: 52px; animation-delay: 2s; }
    .a4  { top: 30%; right: 22%; width: 36px; animation-delay: 3s; }
    .a5  { top: 40%; left: 6%;   width: 70px; animation-delay: 4s; }
    .a6  { top: 48%; right: 6%;  width: 46px; animation-delay: 5s; }
    .a7  { top: 58%; left: 18%;  width: 32px; animation-delay: 6s; }
    .a8  { top: 65%; right: 28%; width: 60px; animation-delay: 7s; }
    .a9  { bottom: 22%; left: 10%; width: 48px; animation-delay: 8s; }
    .a10 { bottom: 18%; right: 12%; width: 38px; animation-delay: 9s; }
    .a11 { bottom: 8%; left: 28%; width: 72px; animation-delay: 10s; }
    .a12 { bottom: 12%; right: 32%; width: 44px; animation-delay: 11s; }
    .a13 { top: 18%; right: 38%; width: 34px; animation-delay: 12s; }
    .a14 { top: 72%; left: 40%; width: 58px; animation-delay: 13s; }
    .a15 { top: 50%; left: 50%; width: 30px; animation-delay: 14s; }

    /* Main shell */
    .chat-shell {
        position: relative;
        z-index: 1;
        width: 100%;
        max-width: 1500px;
        height: min(82vh, 920px);
        padding: 48px 64px 28px;
        border-radius: 28px;
        background: rgba(255,255,255,0.02);
        backdrop-filter: blur(16px);
        box-shadow: 0 30px 70px rgba(0,0,0,0.6);
        display: flex;
        flex-direction: column;
    }

    .chat-title {
        text-align: center;
        font-size: clamp(2.2rem, 3.8vw, 2.8rem);
        letter-spacing: 0.45em;
        text-transform: uppercase;
        color: #facc15;
        margin-bottom: 28px;
    }

    #chatbox {
        flex: 1;
        background: rgba(0,0,0,0.35);
        border-radius: 18px;
        padding: 28px 32px;
        overflow-y: auto;
        box-shadow: inset 0 0 0 1px rgba(20,184,166,0.25);
    }

    .input-row {
        display: flex;
        gap: 16px;
        margin-top: 20px;
    }

    #msg {
        flex: 1;
        padding: 16px 18px;
        border-radius: 14px;
        border: none;
        outline: none;
        font-family: inherit;
        font-size: 0.85rem;
        letter-spacing: 0.14em;
        text-transform: uppercase;
        background: rgba(255,255,255,0.06);
        color: #ffffff;
    }

    button {
        padding: 16px 26px;
        border-radius: 999px;
        border: none;
        font-family: inherit;
        font-size: 0.75rem;
        letter-spacing: 0.22em;
        text-transform: uppercase;
        background: linear-gradient(135deg, #14b8a6, #0f766e);
        color: #ffffff;
        cursor: pointer;
    }

    .bottom-nav {
        display: flex;
        justify-content: center;
        gap: 28px;
        margin-top: 22px;
        padding-top: 12px;
        border-top: 1px solid rgba(20,184,166,0.25);
    }

    .bottom-nav a {
        font-size: 0.7rem;
        letter-spacing: 0.28em;
        text-transform: uppercase;
        color: #9ff3ec;
        text-decoration: none;
    }

    @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-12px); }
    }

    @media (max-width: 768px) {
        .ambient-logos { display: none; }
        .chat-shell { height: auto; padding: 36px 28px 22px; }
        .input-row { flex-direction: column; }
    }
</style>

<!-- Ambient background logos -->
<div class="ambient-logos">
    <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/apple.svg" class="a1">
    <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/microsoft.svg" class="a2">
    <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/tesla.svg" class="a3">
    <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/shopify.svg" class="a4">
    <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/stripe.svg" class="a5">
    <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/airbnb.svg" class="a6">
    <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/nvidia.svg" class="a7">
    <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/intel.svg" class="a8">
    <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/paypal.svg" class="a9">
    <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/coinbase.svg" class="a10">
    <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/ford.svg" class="a11">
    <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/target.svg" class="a12">
    <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/salesforce.svg" class="a13">
    <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/adobe.svg" class="a14">
    <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/uber.svg" class="a15">
</div>

<div class="chat-shell">
    <div class="chat-title">Chatbot</div>

    <div id="chatbox"></div>

    <div class="input-row">
        <input id="msg" placeholder="Ask about a stock ticker..." />
        <button onclick="sendMessage()">Send</button>
    </div>

    <div class="bottom-nav">
        <a href="/">Home</a>
        <a href="/financials">Financials</a>
    </div>
</div>

<script>
async function sendMessage() {
    const input = document.getElementById("msg");
    const msg = input.value;
    const chatbox = document.getElementById("chatbox");
    chatbox.innerHTML += `<p><b>You</b> ${msg}</p>`;

    const res = await fetch("/chat_api", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({message: msg})
    });

    const data = await res.json();
    chatbox.innerHTML += `<p><b>Bot</b> ${data.reply}</p>`;
    input.value = "";
    chatbox.scrollTop = chatbox.scrollHeight;
}
</script>

{% endblock %}
